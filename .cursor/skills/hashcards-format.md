# Hashcards Format Specification

Hashcards is a plain text-based spaced repetition system. This skill documents the format for reading, writing, and updating hashcards decks.

## File Structure

- Each `.md` file in the collection is a **deck**
- The filename (without extension) is the deck name by default
- Decks can contain multiple cards separated by blank lines or horizontal rules (`---`)
- The collection root can contain:
  - Multiple `.md` deck files
  - A `macros.tex` file for custom LaTeX macros
  - Image/audio files referenced by cards
  - A `hashcards.db` SQLite database (auto-generated by the CLI)

## Card Types

### 1. Question-Answer Cards (Q&A)

Basic flashcards with a question and answer.

**Syntax:**
```
Q: <question text>
A: <answer text>
```

**Single-line example:**
```
Q: What is the capital of France?
A: Paris
```

**Multi-line example:**
```
Q: List the noble gases.
A:
- Helium
- Neon
- Argon
- Krypton
- Xenon
- Radon
```

### 2. Cloze Deletion Cards

Cards with blanks that test recall of specific terms. Square brackets `[...]` denote deletions.

**Syntax:**
```
C: <text with [cloze deletions] in square brackets>
```

**Single-line example:**
```
C: The [mitochondria] is the [powerhouse] of the cell.
```

This creates 2 separate cards:
1. "The [...] is the powerhouse of the cell." → mitochondria
2. "The mitochondria is the [...] of the cell." → powerhouse

**Multi-line example:**
```
C:
Better is the sight of the eyes than the wandering of the
desire: this is also vanity and vexation of spirit.

— [Ecclesiastes] [6]:[9]
```

## Card Separators

Cards are separated by:
1. **Blank lines** (one or more empty lines)
2. **Horizontal rules** (`---`) for visual clarity

**Example with separators:**
```
Q: What is photosynthesis?
A: The process by which plants convert light energy into chemical energy.

---

C: Chlorophyll absorbs [red] and [blue] light, reflecting [green].

---

Q: Where does photosynthesis occur?
A: In the chloroplasts of plant cells.
```

## LaTeX Math Support

Cards support LaTeX math via KaTeX.

**Inline math:** Use `$...$`
```
Q: What is the quadratic formula?
A: $x = \frac{-b \pm \sqrt{b^2-4ac}}{2a}$
```

**Display math:** Use `$$...$$`
```
Q: State the Pythagorean theorem.
A:
$$
a^2 + b^2 = c^2
$$
```

**Custom macros:** Create a `macros.tex` file in the collection root:
```
\R \mathbb{R}
\C \mathbb{C}
\N \mathbb{N}
```

## Images and Audio

Use standard Markdown image syntax. Paths are relative to the deck file.

**Image example:**
```
Q: Identify this painting:

![](images/mona-lisa.jpg)

A: The Mona Lisa by Leonardo da Vinci.
```

**Audio example:**
```
Q: How do you pronounce "bonjour"?
A: ![](audio/bonjour.mp3)
```

**Absolute paths from collection root:** Prefix with `@/`
```
![](art/images/painting.jpg)      # Relative to deck file
![](@/art/images/painting.jpg)    # Relative to collection root
```

## TOML Frontmatter

Override the deck name using TOML frontmatter at the start of the file:

```
---
name = "Custom Deck Name"
---

Q: First question in this deck?
A: First answer.
```

This is useful when organizing cards across multiple files while keeping the same deck name:
```
Textbook/
  Ch1.md    # All with name = "Textbook"
  Ch2.md    # All with name = "Textbook"
  Ch3.md    # All with name = "Textbook"
```

## Best Practices

### Writing Good Cards

1. **One fact per card** - Keep cards atomic and focused
2. **Clear, unambiguous questions** - Avoid vague wording
3. **Context in deck name** - Use deck names to provide context
4. **Use cloze for related facts** - Multiple deletions in one cloze test related concepts

### Organization

1. **Group related cards in decks** - One topic per `.md` file
2. **Use subdirectories** - Organize large collections with folders
3. **Consistent naming** - Use descriptive deck filenames
4. **Version control** - Track changes with Git

### Card Identification

- Cards are identified by the SHA-256 hash of their text
- **Editing a card resets its progress** (new hash = new card)
- Use `hashcards orphans list` to find cards that exist in the database but not in files

## Complete Deck Example

```markdown
---
name = "Biology 101"
---

Q: What is the cell theory?
A: All living organisms are composed of cells, cells are the basic unit of life, and all cells arise from pre-existing cells.

---

C: The [nucleus] contains the cell's [genetic material].

---

Q: What is the function of ribosomes?
A: Protein synthesis - they translate mRNA into proteins.

---

C: ATP stands for [adenosine triphosphate] and is the primary [energy currency] of cells.

---

Q: Identify the organelle:

![](images/mitochondria.png)

A: Mitochondrion - the powerhouse of the cell.
```
